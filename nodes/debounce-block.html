<script type="text/html" data-template-name="debounce-block">
    <div class="form-row">
        <label for="node-input-period" title="Filter period in milliseconds (positive number, e.g., 1000)"><i class="fa fa-clock-o"></i> Filter Period (ms)</label>
        <input type="text" id="node-input-period" placeholder="1000" min="0.001" step="any">
        <input type="hidden" id="node-input-periodType">

    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType("debounce-block", {
        category: "control",
        color: "#301934",
        defaults: {
            name: { value: "" },
            period: {
                value: 1000,
                required: true,
                validate: function() { return true; }
            },
            periodType: { value: "num" }
        },
        inputs: 1,
        outputs: 1,
        inputLabels: ["input"],
        outputLabels: ["output"],
        icon: "font-awesome/fa-hourglass-half",
        paletteLabel: "debounce",
        label: function() {
            return this.name || "debounce";
        }
    });
</script>

<script type="text/markdown" data-help-name="debounce-block">
Debounces consecutive `true` payloads and passes `false` payloads immediately with a configurable filter period.

### Inputs
: context (string) : Configures filter period (`"period"`).
: payload (boolean | number) : `true` for debounced output, `false` for immediate output.

### Outputs
: payload (boolean) : `true` after filter period elapses without new `true` payloads, `false` immediately. `msg.context` is consumed.

### Details
Filters consecutive `true` `msg.payload` inputs, outputting `true` after the filter period elapses without new `true` payloads. 

Consecutive `true` payloads within the period reset the timer, delaying output. Outputs `false` `msg.payload` inputs immediately without debouncing. 

Non-boolean payloads (e.g., strings, numbers) are ignored with an error status. 

Tracks ignored `true` payloads, which increments for each `true` payload resetting an active timer, capped at 9999, resetting to 0 if exceeded or on redeployment. 

### Status
- Green (dot): Configuration
- Blue (dot): Output, no alarm
- Red (dot): Output with alarm
- Red (ring): Errors
- Yellow (ring): Unknown context

### References
- [Node-RED Documentation](https://nodered.org/docs/)
- [GitHub Repository](https://github.com/BldgBlocks/node-red-contrib-buildingblocks-control.git)
</script>